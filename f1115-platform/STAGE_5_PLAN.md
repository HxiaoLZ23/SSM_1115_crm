# 阶段五：管理后台开发规划

## 📋 目标

基于现有CRM系统重构，实现完整的管理后台功能，包括用户管理、内容管理、审核管理和数据统计。

---

## 🎯 功能模块

### 1. 用户管理

#### 1.1 用户列表
- 分页显示所有用户
- 搜索功能（用户名、昵称、邮箱）
- 筛选功能（状态、角色）
- 用户详情查看

#### 1.2 用户操作
- 启用/禁用用户
- 删除用户
- 修改用户角色（普通用户/管理员）
- 重置密码

#### 1.3 用户统计
- 用户总数
- 今日新增用户
- 活跃用户数
- 用户增长趋势

### 2. 帖子管理

#### 2.1 帖子列表
- 分页显示所有帖子
- 搜索功能（内容关键词）
- 筛选功能（状态、类型）
- 帖子详情查看

#### 2.2 帖子操作
- 删除帖子
- 置顶/取消置顶
- 标记违规
- 批量删除

#### 2.3 帖子统计
- 帖子总数
- 今日新增帖子
- 热门帖子排行

### 3. 评论管理

#### 3.1 评论列表
- 分页显示所有评论
- 搜索功能（内容关键词）
- 筛选功能（状态）
- 关联帖子查看

#### 3.2 评论操作
- 删除评论
- 标记违规
- 批量删除

### 4. 内容审核

#### 4.1 审核列表
- 待审核内容列表
- 审核历史记录
- 违规内容列表

#### 4.2 审核操作
- 审核通过
- 审核拒绝
- 添加审核备注

### 5. 数据统计

#### 5.1 概览统计
- 用户总数
- 帖子总数
- 评论总数
- 今日活跃用户

#### 5.2 数据图表
- 用户增长趋势
- 内容发布趋势
- 活跃度分析

---

## 🔧 技术实现

### 后端API设计

#### 用户管理接口
```
GET    /api/admin/users              # 获取用户列表（分页、搜索）
PUT    /api/admin/user/{userId}/status  # 更新用户状态
DELETE /api/admin/user/{userId}      # 删除用户
PUT    /api/admin/user/{userId}/role # 修改用户角色
GET    /api/admin/stats/users        # 用户统计数据
```

#### 帖子管理接口
```
GET    /api/admin/posts              # 获取帖子列表（分页、搜索）
DELETE /api/admin/post/{postId}      # 删除帖子
PUT    /api/admin/post/{postId}/top  # 置顶/取消置顶
PUT    /api/admin/post/{postId}/status # 更新帖子状态
GET    /api/admin/stats/posts        # 帖子统计数据
```

#### 评论管理接口
```
GET    /api/admin/comments           # 获取评论列表（分页、搜索）
DELETE /api/admin/comment/{commentId} # 删除评论
PUT    /api/admin/comment/{commentId}/status # 更新评论状态
```

#### 审核管理接口
```
GET    /api/admin/audit/pending      # 获取待审核内容
POST   /api/admin/audit/{id}/approve # 审核通过
POST   /api/admin/audit/{id}/reject  # 审核拒绝
```

#### 统计接口
```
GET    /api/admin/stats/overview     # 概览统计
GET    /api/admin/stats/trend        # 趋势数据
```

---

## 📝 开发任务清单

### 任务1: 用户管理

#### 后端
- [ ] 创建AdminUserController
- [ ] 创建AdminUserService
- [ ] 实现用户列表查询（分页、搜索）
- [ ] 实现用户状态管理
- [ ] 实现用户删除
- [ ] 实现用户统计

#### 前端
- [ ] 创建admin文件夹
- [ ] 创建AdminLayout.vue（管理后台布局）
- [ ] 创建UserManage.vue（用户管理页面）
- [ ] 用户列表表格
- [ ] 搜索和筛选功能
- [ ] 操作按钮（启用/禁用/删除）

### 任务2: 帖子管理

#### 后端
- [ ] 创建AdminPostController
- [ ] 创建AdminPostService
- [ ] 实现帖子列表查询
- [ ] 实现帖子操作（删除、置顶）

#### 前端
- [ ] 创建PostManage.vue
- [ ] 帖子列表表格
- [ ] 操作按钮

### 任务3: 评论管理

#### 后端
- [ ] 创建AdminCommentController
- [ ] 实现评论列表查询
- [ ] 实现评论删除

#### 前端
- [ ] 创建CommentManage.vue
- [ ] 评论列表表格

### 任务4: 数据统计

#### 后端
- [ ] 创建AdminStatsController
- [ ] 实现统计数据查询

#### 前端
- [ ] 创建Dashboard.vue（数据看板）
- [ ] 使用ECharts展示图表

---

## 🎨 UI设计

### 管理后台布局
```
┌────────────────────────────────────────┐
│  F1115管理后台  [用户名] [退出]         │
└────────────────────────────────────────┘
┌──────┬─────────────────────────────────┐
│ 菜单 │  内容区域                        │
│      │                                 │
│ 概览 │  ┌─────────────────────────┐   │
│ 用户 │  │  用户管理                │   │
│ 帖子 │  │  [搜索] [筛选]           │   │
│ 评论 │  │  ┌──────────────────┐   │   │
│ 审核 │  │  │ 用户列表表格      │   │   │
│      │  │  └──────────────────┘   │   │
│      │  └─────────────────────────┘   │
└──────┴─────────────────────────────────┘
```

### 用户管理表格
```
| ID | 用户名 | 昵称 | 邮箱 | 状态 | 角色 | 注册时间 | 操作 |
|----|--------|------|------|------|------|----------|------|
| 1  | admin  | 管理员| ...  | 正常 | 管理员| 2026-01-17| [编辑][禁用][删除] |
```

---

## 🔄 开发顺序

### 第一步：管理后台框架（1天）
1. 创建admin模块结构
2. 管理后台布局组件
3. 管理员登录验证
4. 菜单和路由配置

### 第二步：用户管理（1天）
1. 后端API开发
2. 前端页面开发
3. 测试

### 第三步：内容管理（1天）
1. 帖子管理
2. 评论管理
3. 测试

### 第四步：审核和统计（1天）
1. 审核功能
2. 数据统计
3. 测试

**预计总时间：4天**

---

## 📊 预期成果

### 完成后的功能
- ✅ 管理员可以管理所有用户
- ✅ 管理员可以管理所有内容
- ✅ 管理员可以审核内容
- ✅ 管理员可以查看数据统计

### 完成度提升
- 当前：70%
- 预期：85%
- 提升：+15%

---

## 🔐 权限控制

### 管理员验证
- 检查用户角色（role=1为管理员）
- 拦截器验证管理员权限
- 前端路由守卫

### 安全措施
- 所有管理接口需要管理员权限
- 敏感操作需要二次确认
- 操作日志记录

---

**开始阶段五开发！🚀**

**文档创建日期**: 2026-01-17
