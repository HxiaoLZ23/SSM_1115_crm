# 管理后台使用指南

## 🔐 访问管理后台

### 前提条件
- 必须使用管理员账号登录
- 管理员账号：`admin`（role=1）

### 访问方式

#### 方式1: 从首页进入（推荐）
1. 使用管理员账号登录
2. 在首页顶部导航栏，会看到红色的"管理后台"按钮
3. 点击进入管理后台

#### 方式2: 直接访问URL
- 访问：`http://localhost:3000/admin/dashboard`
- 如果未登录或不是管理员，会被拦截

---

## 📊 功能说明

### 1. 数据概览

**路径**: `/admin/dashboard`

**功能**:
- 用户总数统计
- 帖子总数统计
- 今日新增用户
- 活跃用户数（最近7天）
- 热门帖子Top 10

### 2. 用户管理

**路径**: `/admin/users`

**功能**:
- 用户列表（分页显示）
- 搜索用户（用户名/昵称/邮箱）
- 筛选用户（状态/角色）
- 启用/禁用用户
- 删除用户（不能删除管理员）

**操作**:
```
[禁用] - 禁用用户账号
[启用] - 启用被禁用的账号
[删除] - 永久删除用户（不可恢复）
```

### 3. 帖子管理

**路径**: `/admin/posts`

**功能**:
- 帖子列表（分页显示）
- 搜索帖子（内容关键词）
- 筛选帖子（状态/类型）
- 置顶/取消置顶帖子
- 删除帖子

**操作**:
```
[置顶] - 将帖子置顶显示
[取消置顶] - 取消置顶状态
[删除] - 删除帖子（逻辑删除）
```

---

## 🎯 使用流程

### 步骤1: 准备管理员账号

#### 方法1: 注册后修改角色
1. 注册一个新账号（如：admin）
2. 在数据库中执行：
```sql
UPDATE user_profile SET role = 1 WHERE username = 'admin';
```

#### 方法2: 使用现有管理员账号
数据库中已有管理员账号（id=1, username=admin）

### 步骤2: 登录系统
1. 访问 http://localhost:3000
2. 使用管理员账号登录

### 步骤3: 进入管理后台
1. 在首页点击"管理后台"按钮（红色）
2. 进入数据概览页面

### 步骤4: 管理用户和内容
- 点击左侧菜单切换不同功能
- 使用搜索和筛选功能
- 执行管理操作

---

## 🔍 界面预览

### 侧边栏菜单
```
┌─────────────────┐
│ F1115管理后台    │
├─────────────────┤
│ 📊 数据概览      │
│ 👤 用户管理      │
│ 📄 帖子管理      │
│ 💬 评论管理      │
└─────────────────┘
```

### 数据概览
```
┌──────────┬──────────┬──────────┬──────────┐
│ 用户总数  │ 帖子总数  │ 今日新增  │ 活跃用户  │
│   100    │   500    │    5     │    30    │
└──────────┴──────────┴──────────┴──────────┘

热门帖子 Top 10
┌────┬─────────┬──────────┬────┬────┬────┐
│ ID │ 发布者   │ 内容      │点赞│评论│浏览│
└────┴─────────┴──────────┴────┴────┴────┘
```

---

## ⚠️ 权限说明

### 管理员权限（role=1）
- ✅ 访问管理后台
- ✅ 查看所有数据
- ✅ 管理所有用户
- ✅ 管理所有帖子
- ✅ 删除任何内容

### 普通用户（role=0）
- ❌ 无法访问管理后台
- ❌ 尝试访问会被拦截

### AI机器人（role=2）
- ❌ 无法访问管理后台
- ✅ 可以自动发帖

---

## 🧪 测试管理后台

### 测试1: 访问权限
1. 使用普通用户登录
2. 访问 `http://localhost:3000/admin/dashboard`
3. **期望**: 提示"需要管理员权限"，跳转到首页

### 测试2: 管理员登录
1. 使用管理员账号登录
2. 点击"管理后台"按钮
3. **期望**: 成功进入管理后台

### 测试3: 用户管理
1. 进入用户管理页面
2. 搜索用户
3. 禁用/启用用户
4. **期望**: 操作成功

### 测试4: 帖子管理
1. 进入帖子管理页面
2. 置顶一条帖子
3. 删除一条帖子
4. **期望**: 操作成功

---

## 🔄 重启前端测试

```bash
# 在VSCode中
# 停止前端（Ctrl+C）
npm run dev
```

访问首页，如果是管理员账号，会看到"管理后台"按钮！

---

**管理后台已完成！🚀**

---

**文档创建日期**: 2026-01-17
